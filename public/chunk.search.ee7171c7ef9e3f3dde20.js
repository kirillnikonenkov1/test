(self.webpackChunktest=self.webpackChunktest||[]).push([[464],{863:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>p});const n={props:{items:{type:Array,default:function(){return[]}}}};var s=r(900);const a=(0,s.Z)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"list-view"},[r("div",{staticClass:"list-view__wrapper d-flex justify-space-between justify-md-start flex-wrap"},t._l(t.items,(function(e){return r("div",{key:e.id,staticClass:"list-view__item mb-5"},[t._t("default",null,{item:e})],2)})),0)])}),[],!1,null,"b5b4ed6c",null).exports,i=(0,s.Z)({},(function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"pa-5 card cursor-pointer",on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)}),[],!1,null,"76063058",null).exports,u={props:{numOfPages:{type:Number,default:0},showLeft:{type:Number,default:5},showRight:{type:Number,default:5},currentPage:{type:[String,Number],default:1}},methods:{showItem:function(t){return this.currentPage<=this.showLeft?t<this.showLeft+this.showRight:this.currentPage>this.showLeft&&this.currentPage<this.numOfPages-this.showRight?t>this.currentPage-this.showLeft&&t<this.currentPage+this.showRight:t-1>this.numOfPages-this.showRight-this.showLeft}}},c=(0,s.Z)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.numOfPages?r("div",{staticClass:"pagination d-flex flex-wrap"},[r("c-button",{staticClass:"mr-1",attrs:{disabled:1===t.currentPage},on:{click:function(e){return t.$emit("change",t.currentPage-1)}}},[t._v("\n      Назад\n    ")]),t._v(" "),t._l(t.numOfPages,(function(e){return t.showItem(e)?r("c-button",{key:e,staticClass:"pagination__item mr-1",class:{"pagination__item--active":t.currentPage===e},on:{click:function(r){return t.$emit("change",e)}}},[t._v("\n        "+t._s(e)+"\n    ")]):t._e()})),t._v(" "),r("c-button",{attrs:{disabled:t.currentPage===t.numOfPages},on:{click:function(e){return t.$emit("change",t.currentPage+1)}}},[t._v("\n    Вперед\n  ")])],2):t._e()}),[],!1,null,"acd684e8",null).exports;var o=r(629);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const f={name:"search",components:{listView:a,card:i,pagination:c},data:function(){return{loading:!1,plugText:"",showPlug:!1}},computed:h({},(0,o.Se)(["getUsers","getTotalNumOfPages"])),methods:h(h({},(0,o.nv)(["searchGitUser","searchUserByLogin"])),{},{searchWithSorting:function(t){var e=this;this.loading=!0,this.searchGitUser({query:this.$route.params.query,page:1,sorting:t}).then((function(t){e.loading=!1})).catch((function(t){e.loading=!1}))},searchUsers:function(){var t=this;this.searchGitUser({query:this.$route.params.query,page:this.$route.query.page}).then((function(e){0===e.data.items.length&&(t.plugText="Упс... Ничего не найдено",t.showPlug=!0)})).catch((function(e){403===e.response.status&&(t.plugText="Слишком много запросов, подождите минуту и повторите попытку;)",t.showPlug=!0)}))},openCard:function(t){this.$router.push({name:"user",params:{login:t.login.toString()},query:{page:this.$route.query.page}})}}),watch:{$route:function(t,e){this.showPlug=!1,this.searchUsers()}},created:function(){!this.getUsers.length&&this.searchUsers()},beforeRouteEnter:function(t,e,r){return!t.query.page||+t.query.page<=0?r({name:"search",params:{query:t.params.query},query:{page:"1"}}):r()}},p=(0,s.Z)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[t.showPlug?r("div",{staticClass:"plug"},[t._v("\n    "+t._s(t.plugText)+"\n  ")]):t._e(),t._v(" "),t.showPlug?t._e():r("div",[r("div",{staticClass:"sorting d-flex flex-wrap mb-5"},[r("c-button",{staticClass:"mr-2 mb-3",attrs:{loading:t.loading},on:{click:function(e){return t.searchWithSorting("desc")}}},[t._v("\n        Сортировать по убыванию\n      ")]),t._v(" "),r("c-button",{staticClass:"mb-3",attrs:{loading:t.loading},on:{click:function(e){return t.searchWithSorting("asc")}}},[t._v("\n        Сортировать по возрастанию\n      ")])],1),t._v(" "),r("listView",{attrs:{items:t.getUsers},scopedSlots:t._u([{key:"default",fn:function(e){return[r("card",{on:{click:function(r){return t.openCard(e.item)}}},[r("div",{staticClass:"mb-2 ma-auto card__img-wrapper"},[r("img",{attrs:{src:e.item.avatar_url,alt:"user avatar"}})]),t._v(" "),r("p",{staticClass:"mb-2 word-break"},[r("span",{staticClass:"text-bold"},[t._v("Login:")]),t._v("\n            "+t._s(e.item.login)+"\n          ")]),t._v(" "),r("p",{staticClass:"mb-2"},[r("span",{staticClass:"text-bold"},[t._v("Type:")]),t._v("\n            "+t._s(e.item.type)+"\n          ")])])]}}],null,!1,2260862036)}),t._v(" "),r("pagination",{attrs:{"num-of-pages":t.getTotalNumOfPages,"current-page":+t.$route.query.page},on:{change:function(e){return t.$router.push({name:"search",query:{page:e}})}}})],1),t._v(" "),r("router-view")],1)}),[],!1,null,"93f74d84",null).exports}}]);